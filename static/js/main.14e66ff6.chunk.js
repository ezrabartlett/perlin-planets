(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{35:function(e,t,r){e.exports=r.p+"static/media/threeTone.f8722875.jpg"},54:function(e,t,r){e.exports=r(77)},62:function(e,t,r){},63:function(e,t,r){},77:function(e,t,r){"use strict";r.r(t);var a=r(1),n=r.n(a),o=r(25),i=r.n(o),c=(r(62),r(63),r(17)),s=r(85),u=r(11),l=r(86),m=r(87),f=r(6),d=r(2),v=r(3),h=function(){function e(t){Object(d.a)(this,e),this.seed=void 0,this.seed=b(t)}return Object(v.a)(e,[{key:"next",value:function(){var e=Math.pow(2,32);return this.seed=(1664525*this.seed+1013904223)%e,this.seed/e}},{key:"getInt",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,r=Math.abs(this.next());return Math.floor(r*(t-e)+e)}},{key:"getDouble",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Math.abs(this.next()*t)*(t-e)+e}}]),e}(),b=function(e){var t=0;if(0===e.length)return t;for(var r=0;r<e.length;r++){t=(t<<5)-t+e.charCodeAt(r),t&=t}return t},g=r(12),p=r(24),y=r.n(p),w=r(19),E=function(){function e(t,r){Object(d.a)(this,e),this.seed=void 0,this.seedFunction=void 0,this.baseNoise=void 0,this.layerTwo=void 0,this.generalNoise=void 0,this.radius=void 0,this.seed=t,this.seedFunction=y()(t),this.baseNoise=Object(w.a)(this.seedFunction),this.layerTwo=Object(w.a)(this.seedFunction),this.generalNoise=Object(w.a)(this.seedFunction),this.radius=r}return Object(v.a)(e,[{key:"getTerrain",value:function(e,t,r){var a=.05*this.radius;return this.radius+this.baseNoise(e,t,r)*a+.5*this.baseNoise(2*(e+1e3),2*(t+1e3),2*(r+1e3))*a+.25*this.baseNoise(4*(e+1e3),4*(t+1e3),4*(r+1e3))+.25*this.baseNoise(6*(e+1e3),6*(t+1e3),6*(r+1e3))*a}},{key:"getNoise",value:function(e,t,r,a){return this.generalNoise((e+2e3)*a,(t+2e3)*a,(r+2e3)*a)}}]),e}(),O=r(50),j=function(e,t,r){var a=new f.Vector3(0,1,0).angleTo(e)/Math.PI;return(1-Math.abs(.5-a)/.5)*t+10*r.getNoise(e.x,e.y,e.z,.1)},C=function(e){var t=Object(a.useRef)(null),o=new E(e.seed,e.radius),i=[],c=[],s=Object(g.c)(f.TextureLoader,r(35));return s.minFilter=f.NearestFilter,s.magFilter=f.NearestFilter,Object(a.useEffect)(function(){for(var r=t.current.geometry,a=t.current.material,n=0;n<r.attributes.position.count;n++){var s=r.attributes.position.getX(n),u=r.attributes.position.getY(n),l=r.attributes.position.getZ(n),m=new f.Vector3(s,u,l).normalize();m.multiplyScalar(o.getTerrain(m.x,m.y,m.z)),i.push(m.length()),c.push(j(m,e.baseTemperature,o)),s=m.x,u=m.y,l=m.z,r.attributes.position.setX(n,s),r.attributes.position.setY(n,u),r.attributes.position.setZ(n,l)}r.setAttribute("altitude",new f.Float32BufferAttribute(i,1)),r.setAttribute("temperature",new f.Float32BufferAttribute(c,1)),a.uniforms.time={value:1},r.computeVertexNormals()},[]),n.a.createElement(n.a.Fragment,null,n.a.createElement("mesh",{ref:t,renderOrder:2},n.a.createElement("boxGeometry",{args:[1,1,1,e.resolution,e.resolution,e.resolution]}),n.a.createElement(O.a,{baseMaterial:f.MeshToonMaterial,vertexShader:"\nvarying vec3 vPosition;\nvarying vec4 vColor;\nvarying vec2 vUv;\nattribute float altitude;\nattribute float temperature;\nvarying float vAltitude;\nvarying float vTemperature;\n\nvoid main() {\n    vUv = uv;\n    vPosition = position;\n    vNormal = normal;\n    vAltitude = altitude;\n    vTemperature = temperature;\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}\n",fragmentShader:"\nvarying vec3 vPosition;\nvarying vec2 vUv;\nvarying vec4 vColor;\nvarying float vAltitude;\nvarying float vTemperature;\nuniform float time;\nuniform float radius;\nuniform vec4 grassColor;\n\nvoid main() {\n    vec4 calculated_color = grassColor;\n\n    if ( vTemperature <= 32.0 ) {\n        calculated_color = vec4(1.0, 1.0, 1.0, 1.0);\n    } else if ( vAltitude < radius+radius*.01 ) {\n        calculated_color = vec4(vec3(244,227,171)/255.0, 1.0);\n    }\n    /*if ( vTemperature >= 90.0 ) {\n        calculated_color = vec4(vec3(244,227,171)/255.0, 1.0);\n    }\n    if ( vTemperature >= 85.0 ) {\n        calculated_color = vec4(mix(vec3(10,157,117), vec3(244,227,171), (vTemperature-85.0)/5.0)/255.0, 1.0);\n    }*/\n   \n    csm_DiffuseColor = calculated_color;\n}\n",silent:!0,uniforms:{grassColor:{value:1===e.colorProfile?[10/285,157/285,117/285,1]:[100/255,41/255,38/255,1]},radius:{value:e.radius}},gradientMap:s})))},P="\n//precision highp float;\n#define FLT_MAX 3.402823466e+38\n\nvarying vec3 vPosition;\n\nuniform vec3 uSunPos;\nuniform vec3 cameraPos;\n\nuniform vec3 pCenter;\nuniform float uRadius;\n\nvec2 raySphereIntersection(vec3 center, float radius, vec3 rayOrigin, vec3 rayDir) {\n    vec3 offset = rayOrigin - center;\n    float a = 1.0; // set to dot(rayDir, rayDir); if raydir not normalized\n    float b = 2.0 * dot(offset, rayDir);\n    float c = dot(offset, offset) - radius * radius;\n    float d = b * b - 4.0 * a * c;\n\n    if (d > 0.0) {\n        float s = sqrt(d);\n        float dstToSphereNear = max(0.0 , ( -b - s ) / ( 2.0 * a ));\n        float dstToSphereFar = ( -b + s ) / ( 2.0 * a );\n\n        if (dstToSphereFar >= 0.0) {\n            return vec2(dstToSphereNear, dstToSphereFar-dstToSphereNear);\n        }\n\n       /*float t = (-b - sqrt(d)) / (2.0 * a);\n        if (t >= 0.0) {\n            intersectionPoint = rayOrigin + rayDir * t;\n            return true;\n        }*/\n    }\n\n    return vec2(FLT_MAX, 0);\n}\n\nvoid main() {\n    vec3 rayOrigin = cameraPos;\n    vec3 rayDir = normalize(vPosition-cameraPos);\n    vec2 hitInfo = raySphereIntersection( pCenter, uRadius, cameraPos, rayDir);\n    float dstToAtmosphereNear = hitInfo.x;\n    float dstThroughAtmosphere = hitInfo.y;\n    \n    gl_FragColor = vec4(vec3(102.0/255.0, 162.0/255.0, 209.0/255.0), 1.0*(dstThroughAtmosphere) / (2.0*uRadius));\n}\n",T="\n\nattribute vec3 aPosition;\n\nvarying vec3 vPosition;\n\nvoid main() {\n    vec4 worldPosition = modelMatrix * vec4(position, 1.0);\n    vPosition = worldPosition.xyz;\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}\n",M=function(e,t){var r=6.674*Math.pow(10,-11),a=2*e;return 2*Math.PI*Math.sqrt(Math.pow(a,3)/(t*r))};function R(e){new f.MeshToonMaterial;var t=e.attributes.orbitRadius,o=Object(a.useRef)(null),i=Object(a.useRef)(null),c=Object(a.useState)(new f.Vector3(e.attributes.orbitRadius,0,0)),s=Object(u.a)(c,2),l=s[0],m=(s[1],Object(a.useRef)(null)),d=e.attributes.radius,v=e.cameraIndex;Object(a.useEffect)(function(){v=e.cameraIndex},[e.cameraIndex]);var h=Object(g.c)(f.TextureLoader,r(35));h.minFilter=f.NearestFilter,h.magFilter=f.NearestFilter;var b=M(e.attributes.orbitRadius,e.starMass);return Object(g.a)(function(r,a){if(m.current){var n=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e=60*b*60*1e3,r=Date.now()%e/e*2*Math.PI;return[t*Math.cos(r),t*Math.sin(r)]}(a);m.current.position.x=n[0],m.current.position.z=n[1],m.current.position.y=0}v?function(){var t=o.current.material;t&&t.uniforms?(1===e.cameraIndex?e.orbitCameraRef&&e.orbitCameraRef.current&&(t.uniforms.cameraPos.value=e.orbitCameraRef.current.position):e.thirdPersonCameraRef&&e.thirdPersonCameraRef.current&&(t.uniforms.cameraPos.value=e.thirdPersonCameraRef.current.position),m.current&&(t.uniforms.pCenter.value=m.current.position)):console.log("no material")}():function(){var t=i.current.material;t&&t.uniforms?(1===v?e.orbitCameraRef&&e.orbitCameraRef.current&&(t.uniforms.cameraPos.value=e.orbitCameraRef.current.position):e.thirdPersonCameraRef&&e.thirdPersonCameraRef.current&&(t.uniforms.cameraPos.value=e.thirdPersonCameraRef.current.position),m.current&&(t.uniforms.pCenter.value=m.current.position)):console.log("no material")}()}),n.a.createElement(n.a.Fragment,null,n.a.createElement("mesh",{visible:!0,ref:m,onClick:function(t){m&&m.current&&(e.setCameraTarget&&e.setCameraTarget(m),t.stopPropagation())},position:l},n.a.createElement(C,{baseTemperature:100,radius:d,resolution:100,seed:e.attributes.seed,meshRef:m,colorProfile:e.colorProfile}),n.a.createElement("mesh",null,n.a.createElement("sphereGeometry",{args:[d,400,200]}),n.a.createElement("meshToonMaterial",{fog:!0,color:"#66a2d1",gradientMap:h})),n.a.createElement("mesh",{visible:1===v,ref:o,renderOrder:-10},n.a.createElement("sphereGeometry",{args:[1.2*d,400,200]}),n.a.createElement("shaderMaterial",{transparent:!0,fragmentShader:P,vertexShader:T,uniforms:{uSunPos:{value:[0,0,0]},cameraPos:{value:[0,0,0]},pCenter:{value:[0,0,0]},uRadius:{value:1.2*e.attributes.radius}}})),n.a.createElement("mesh",{visible:0===v,ref:i,renderOrder:-10},n.a.createElement("sphereGeometry",{args:[1.2*d,400,200]}),n.a.createElement("shaderMaterial",{side:f.BackSide,transparent:!0,fragmentShader:P,vertexShader:T,uniforms:{uSunPos:{value:[0,0,0]},cameraPos:{value:[0,0,0]},pCenter:{value:[0,0,0]},uRadius:{value:1.2*e.attributes.radius}}}))))}function S(e){var t=Object(a.useState)(1.5),r=Object(u.a)(t,2),o=(r[0],r[1],Object(a.useState)("white")),i=Object(u.a)(o,2),c=i[0],s=(i[1],Object(a.useRef)(null));return Object(a.useEffect)(function(){e.setCameraTarget&&e.setCameraTarget(s)},[]),n.a.createElement(n.a.Fragment,null,n.a.createElement("mesh",{ref:s,onClick:function(t){s&&s.current&&(e.setCameraTarget&&e.setCameraTarget(s),t&&t.stopPropagation())},material:new f.MeshStandardMaterial({color:"color",emissive:"#ffdd00"})},n.a.createElement("sphereGeometry",{args:[e.radius,30,30]}),n.a.createElement("pointLight",{castShadow:!0,color:c,distance:6e6,intensity:.8})))}function x(e){for(var t=new h(e.seed),r=t.getInt(0,6),a=4e5*Math.pow(10,25),o=[],i=0;i<=r;i++){var c=t.getInt(3e4,11e4),s={seed:t.getDouble(1,1e5).toString(),radius:c,seaLevel:c,baseTemperature:100,humidity:100,moons:t.getInt(0,3),orbitRadius:1e6*(i+1)+4e5,orbitInclination:t.getInt(0,35),tilt:t.getInt(0,35)};o.push(s)}return n.a.createElement(n.a.Fragment,null,n.a.createElement(S,{setCameraTarget:e.setCameraTarget,radius:4e5,seed:e.seed}),o.map(function(r){return n.a.createElement(R,{cameraIndex:e.cameraIndex,orbitCameraRef:e.orbitCamera,thirdPersonCameraRef:e.thirdPersonCamera,setCameraTarget:e.setCameraTarget,colorProfile:t.getInt(0,2),starMass:a,attributes:r})}))}function F(e){var t=Object(g.c)(f.TextureLoader,r(35)),o=e.meshRef;t.minFilter=f.NearestFilter,t.magFilter=f.NearestFilter;new f.Vector3(0,0,0);var i=new f.Vector3(0,0,0),c=Object(a.useState)(0),s=Object(u.a)(c,2),l=s[0],m=s[1],d=Object(a.useState)(0),v=Object(u.a)(d,2),h=v[0],b=v[1],p=Object(a.useState)(0),y=Object(u.a)(p,2),w=y[0],E=y[1],O=Object(a.useState)(0),j=Object(u.a)(O,2),C=j[0],P=j[1],T=Object(a.useState)(0),M=Object(u.a)(T,2),R=M[0],S=M[1],x=Object(a.useState)(0),F=Object(u.a)(x,2),k=F[0],I=F[1],V=Object(a.useState)(0),N=Object(u.a)(V,2),D=N[0],A=N[1],L=Object(a.useState)(1e4),K=Object(u.a)(L,2),_=K[0],z=K[1];window.addEventListener("keydown",function(e){switch(e.code){case"KeyQ":b(1);break;case"KeyE":m(1);break;case"KeyA":E(1);break;case"KeyD":P(1);break;case"KeyW":I(1);break;case"KeyS":S(1);break;case"ShiftLeft":A(1)}}),window.addEventListener("keyup",function(e){switch(e.code){case"KeyQ":b(0);break;case"KeyE":m(0);break;case"KeyA":E(0);break;case"KeyD":P(0);break;case"KeyW":I(0);break;case"KeyS":S(0);break;case"ShiftLeft":A(0);break;case"Enter":z(1e4===_?100:1e4)}});return Object(g.a)(function(e,t){o.current&&(o.current.getWorldDirection(i),o.current.rotateZ(.5*(l-h)*t),o.current.rotateY(.5*(w-C)*t),o.current.rotateX(.5*(k-R)*t),o.current.translateZ(.5*D*_),console.log(_))},-1),n.a.createElement(n.a.Fragment,null,n.a.createElement("mesh",{ref:o,onClick:function(t){e.switchCamera()},position:e.startingPosition},n.a.createElement("mesh",null,n.a.createElement("coneGeometry",{args:[.8,.3,30,8]}),n.a.createElement("meshToonMaterial",{color:"#e56b6f",gradientMap:t})),n.a.createElement("mesh",{rotation:new f.Euler(Math.PI,0,0),position:new f.Vector3(0,-.27,0)},n.a.createElement("coneGeometry",{args:[.8,.2]}),n.a.createElement("meshToonMaterial",{color:"#e56b6f",gradientMap:t})),n.a.createElement("mesh",null,n.a.createElement("sphereGeometry",{args:[.3,20,20]}),n.a.createElement("meshToonMaterial",{color:"#8ecae6",gradientMap:t})),n.a.createElement("mesh",{position:new f.Vector3(0,-.17,0)},n.a.createElement("cylinderGeometry",{args:[.8,.8,.03]}),n.a.createElement("meshToonMaterial",{color:"#f2e9e4",gradientMap:t}))))}function k(e){Object(a.useRef)();var t=e.cameraRef,r=new f.Vector3,o=new f.Vector3,i=e.target;return Object(g.a)(function(e,a){var n=function(){var e=new f.Vector3(0,1,-5);return i.current&&(e.applyQuaternion(i.current.quaternion),e.add(i.current.position)),e}(),c=function(){var e=new f.Vector3(0,.4,1.3);return i.current&&(e.applyQuaternion(i.current.quaternion),e.add(i.current.position)),e}();r.copy(n),o.copy(c),t.current.position.copy(r),t.current.rotation.copy(i.current.rotation),t.current.rotateY(Math.PI)}),n.a.createElement(l.a,{ref:e.cameraRef,fov:75,far:3e7})}function I(e){var t=Object(a.useState)("Ezra Bartlett"),r=Object(u.a)(t,2),o=r[0],i=r[1],c=Object(a.useRef)(null),s=Object(a.useRef)(null),d=Object(a.useRef)(null),v=Object(a.useRef)(null),h=Object(a.useRef)(null),b=Object(g.n)(),p=b.set,y=(b.scene,new f.Vector3(0,0,2e6)),w=!1,E=Date.now(),O=new f.Vector3(0,0,0),j=new f.Vector3(0,0,0),C=new f.Vector3(0,0,0),P=Object(a.useState)(1),T=Object(u.a)(P,2),M=T[0],R=T[1],S=Object(a.useState)(!0),I=Object(u.a)(S,2),V=I[0],N=I[1],D=Object(g.n)();D.size,D.camera;Object(a.useEffect)(function(){V?(p({camera:d.current}),R(1)):(R(0),p({camera:s.current}))},[V]);return window.addEventListener("keyup",function(e){"Space"===e.code&&N(!V),window.addEventListener("keyup",function(e){"KeyR"===e.code&&i(function(e){for(var t="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=r.length,n=0;n<e;)t+=r.charAt(Math.floor(Math.random()*a)),n+=1;return t}(5))})}),Object(g.a)(function(e,t){if(h&&h.current&&c&&c.current)if(y.copy(d.current.position),w){var r=h.current.position,a=c.current.object.position,n=Date.now(),o=(n-E)/300;c.current.target.lerpVectors(j,r,o),a.lerpVectors(C,(new f.Vector3).addVectors(r,O),o),n-E>300&&(w=!1)}else c.current.target=h.current.position}),n.a.createElement(n.a.Fragment,null,n.a.createElement("ambientLight",{color:"white",intensity:.2}),n.a.createElement("color",{attach:"background",args:["black"]}),n.a.createElement(k,{cameraRef:s,target:v}),n.a.createElement(l.a,{ref:d,fov:75,position:y,far:3e8}),n.a.createElement(m.a,{ref:c,camera:d.current}),n.a.createElement(x,{cameraIndex:M,orbitCamera:d,thirdPersonCamera:s,setCameraTarget:function(e){if(console.log(window.window.screen.width/window.screen.height),V&&e!==h){var t=c.current.target.clone(),r=d.current.position.clone();j.copy(t),C.copy(r),O.subVectors(r,t),E=Date.now(),w=!0,c.current.target=t,h=e}},time:3,seed:o}),n.a.createElement(F,{startingPosition:new f.Vector3(78e4,0,0),startingAngle:new f.Quaternion(0,0,0),meshRef:v,switchCamera:function(){N(!V)}}))}var V=r(88);function N(){return n.a.createElement("div",{id:"canvas-container"},n.a.createElement(s.a,{component:"div",sx:{height:"1000px",width:"100%"}},n.a.createElement(c.a,{shadows:!0,gl:{logarithmicDepthBuffer:!0,antialias:!0},camera:{position:[0,0,200],far:1e7}},n.a.createElement(I,null),n.a.createElement(V.a,null))))}Object(o.createRoot)(document.getElementById("root")).render(n.a.createElement(N,null));var D=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,89)).then(function(t){var r=t.getCLS,a=t.getFID,n=t.getFCP,o=t.getLCP,i=t.getTTFB;r(e),a(e),n(e),o(e),i(e)})};i.a.createRoot(document.getElementById("root")).render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(N,null))),D()}},[[54,1,2]]]);
//# sourceMappingURL=main.14e66ff6.chunk.js.map